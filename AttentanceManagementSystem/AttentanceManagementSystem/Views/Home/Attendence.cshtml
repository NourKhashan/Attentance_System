@using Microsoft.AspNet.Identity;
@{
    ViewBag.Title = "Attendence";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Assign= "false";


}

<h2>Attendence</h2>

@Ajax.ActionLink("Attendence", "AssignAttendece", new { },new AjaxOptions() {
    HttpMethod="Get",
    InsertionMode=InsertionMode.Replace,
    UpdateTargetId= "empAttendence",
    OnSuccess= "showModal()"

}, new { @class = "btn btn-info btn-lg", id = "btn" })
            

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"></h4>
            </div>
            <div class="modal-body">
                <div id="empAttendence">

                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-default" data-dismiss="modal" onclick="redirectToHome()">Close</button>
            </div>
        </div>

    </div>
</div>
@section scripts{
    <script>
        $(function () {

            let date = new Date(),
                min = date.getMinutes(),
                hour = date.getHours();

            if (min > 30 && hour == 9 || min > 30 && hour > 9) {
                console.log("Not i time");
                $('#myModal').modal();
                $("#empAttendence").text('U Register Attendence Befor -_-')

            }



        });
        function showModal() {

            $('#myModal').modal();
            setTimeout(() => { $('#myModal') }, 1000);
        }

        function redirectToHome() {
            window.location.href = '@Url.Content("~/Home/Index")';
        }
</script>
    }